#!/usr/bin/env python3
"""
GCC 核心交换机拓扑自动化工具 - 便捷入口
直接使用项目虚拟环境执行 CLI
"""
import os
import sys
from pathlib import Path

# 获取项目根目录
PROJECT_ROOT = Path(__file__).parent.absolute()
VENV_PYTHON = PROJECT_ROOT / ".venv" / "bin" / "python"

# 检查虚拟环境是否存在
if not VENV_PYTHON.exists():
    print(f"错误：虚拟环境不存在: {VENV_PYTHON}", file=sys.stderr)
    print("请先创建虚拟环境: python3 -m venv .venv", file=sys.stderr)
    print("并安装依赖: .venv/bin/pip install click", file=sys.stderr)
    sys.exit(1)

# 执行 topo CLI
os.chdir(PROJECT_ROOT)
os.execv(str(VENV_PYTHON), [str(VENV_PYTHON), "-m", "topo"] + sys.argv[1:])
